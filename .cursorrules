# Cursor Rules — Next.js 16+ Frontend-Only Project

> **Detailed rules are in `.cursor/rules/*.mdc` files**

## Project Overview

| Property | Value |
|----------|-------|
| Name | MangaSBS (msbs) |
| Stack | Next.js 16.0.8, React 19.2.1, TypeScript 5, TailwindCSS 4, shadcn/ui |
| Package Manager | Yarn 4.12.0 |
| Dev Server | `PORT=3001` with Turbopack |
| Testing | Jest + Testing Library (80% coverage threshold) |

## Quick Commands

```bash
yarn dev          # Start dev server (PORT=3001 with turbopack)
yarn build        # Build for production with turbopack
yarn start        # Start production server (PORT=3001)
yarn lint         # Run linter (ESLint)
yarn format       # Format code (Prettier)
yarn type-check   # TypeScript type checking
yarn test         # Run tests (Jest + RTL, ≥80% coverage)
```

## Frontend-Only Rules (CRITICAL)

- **NO** Server Actions (`"use server"`)
- **NO** `app/api/*` routes
- **NO** secrets/DB SDKs in client
- **ONLY** `NEXT_PUBLIC_*` environment variables
- **ALL** network through `@/lib/http/client.ts`

## Key Principles

1. **MCP Tools First** — Always use MCP tools when available (see `14-mcp-tools.mdc`)
2. **Mobile-first** — Base styles for mobile, scale up with `sm`/`md`/`lg`/`xl`/`2xl`
3. **Theme-aware** — Use shadcn tokens, no hardcoded colors
4. **i18n-first** — All text from `src/i18n/locales/{en,vi}/*.json` (19 namespaces)
5. **Type-safe** — TypeScript strict mode, Zod validation
6. **Client Components** — All pages use `"use client"` (wrapped in NoSSR)

## Rules Index

| File | Topic |
|------|-------|
| `01-architecture.mdc` | Project structure, stack, environment |
| `02-routing-pages.mdc` | App Router patterns, client components |
| `03-data-fetching.mdc` | TanStack Query, query keys factory, caching |
| `04-http-api.mdc` | HTTP client, interceptors, API patterns |
| `05-state-jotai.mdc` | Jotai atoms, auth store |
| `06-forms-validation.mdc` | React Hook Form + Zod |
| `07-i18n.mdc` | next-intl, namespaces, translation function |
| `08-components-ui.mdc` | shadcn/ui, component organization |
| `09-theming.mdc` | Theme system, tokens, dark/light modes |
| `10-responsive.mdc` | Mobile-first breakpoints |
| `11-animations.mdc` | framer-motion, AnimatedSection, Skeletonize |
| `12-testing.mdc` | Jest + RTL patterns |
| `13-naming-imports.mdc` | Naming conventions, file organization |
| `14-mcp-tools.mdc` | MCP tool usage (MANDATORY) |
| `15-definition-of-done.mdc` | QA checklist |

## i18n Namespaces (19 total)

`admin`, `article`, `auth`, `characters`, `comments`, `common`, `demo`, `home`, `media`, `organizations`, `permissions`, `profile`, `series`, `settings`, `staff`, `tags`, `toast`, `user`, `write`

## Breakpoints (Mobile-First)

| Prefix | Min Width | Use Case |
|--------|-----------|----------|
| (base) | < 640px | Mobile phones |
| `sm:` | ≥ 640px | Large phones, small tablets |
| `md:` | ≥ 768px | Tablets |
| `lg:` | ≥ 1024px | Small laptops, desktops |
| `xl:` | ≥ 1280px | Large desktops |
| `2xl:` | ≥ 1536px | Extra large screens |

## Theme Tokens (Never Hardcode Colors)

| Use | Token |
|-----|-------|
| Background | `bg-background` |
| Text | `text-foreground` |
| Card | `bg-card text-card-foreground` |
| Border | `border-border` |
| Muted | `text-muted-foreground` |
| Hover | `hover:bg-accent hover:text-accent-foreground` |
| Focus Ring | `focus-visible:ring-ring` |

---

**See `.cursor/rules/*.mdc` for detailed rules with examples.**
